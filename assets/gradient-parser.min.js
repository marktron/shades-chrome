var GradientParser;(GradientParser=(GradientParser=window.GradientParser||{})||{}).parse=function(){var r={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function i(r){var i=new Error(t+": "+r);throw i.source=t,i}function n(){var r=d(e);return t.length>0&&i("Invalid input not EOF"),r}function e(){return a("linear-gradient",r.linearGradient,u)||a("repeating-linear-gradient",r.repeatingLinearGradient,u)||a("radial-gradient",r.radialGradient,s)||a("repeating-radial-gradient",r.repeatingRadialGradient,s)}function a(t,n,e){return o(n,function(n){var a=e();return a&&(h(r.comma)||i("Missing comma before color stops")),{type:t,orientation:a,colorStops:d(g)}})}function o(t,n){var e=h(t);if(e)return h(r.startCall)||i("Missing ("),result=n(e),h(r.endCall)||i("Missing )"),result}function u(){return y("directional",r.sideOrCorner,1)||y("angular",r.angleValue,1)}function s(){var i,n,e=l();return e&&((i=[]).push(e),n=t,h(r.comma)&&((e=l())?i.push(e):t=n)),i}function l(){var r=function(){var r=y("shape",/^(circle)/i,0);r&&(r.style=_()||v());return r}()||function(){var r=y("shape",/^(ellipse)/i,0);r&&(r.style=m()||v());return r}();if(r)r.at=c();else{var t=v();if(t){r=t;var i=c();i&&(r.at=i)}else{var n=f();n&&(r={type:"default-radial",at:n})}}return r}function v(){return y("extent-keyword",r.extentKeywords,1)}function c(){if(y("position",/^at/,0)){var r=f();return r||i("Missing positioning value"),r}}function f(){var r={x:m(),y:m()};if(r.x||r.y)return{type:"position",value:r}}function d(t){var n=t(),e=[];if(n)for(e.push(n);h(r.comma);)(n=t())?e.push(n):i("One extra comma");return e}function g(){var t=y("hex",r.hexColor,1)||o(r.rgbaColor,function(){return{type:"rgba",value:d(p)}})||o(r.rgbColor,function(){return{type:"rgb",value:d(p)}})||y("literal",r.literalColor,0);return t||i("Expected color definition"),t.length=m(),t}function p(){return h(r.number)[1]}function m(){return y("%",r.percentageValue,1)||y("position-keyword",r.positionKeywords,1)||_()}function _(){return y("px",r.pixelValue,1)||y("em",r.emValue,1)}function y(r,t,i){var n=h(t);if(n)return{type:r,value:n[i]}}function h(r){var i,n;return(n=/^[\n\r\t\s]+/.exec(t))&&b(n[0].length),(i=r.exec(t))&&b(i[0].length),i}function b(r){t=t.substr(r)}return function(r){return t=r.toString(),n()}}(),(GradientParser=GradientParser||{}).stringify=function(){var r={"visit_linear-gradient":function(t){return r.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return r.visit_gradient(t)},"visit_radial-gradient":function(t){return r.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return r.visit_gradient(t)},visit_gradient:function(t){var i=r.visit(t.orientation);return i&&(i+=", "),t.type+"("+i+r.visit(t.colorStops)+")"},visit_shape:function(t){var i=t.value,n=r.visit(t.at),e=r.visit(t.style);return e&&(i+=" "+e),n&&(i+=" at "+n),i},"visit_default-radial":function(t){var i="",n=r.visit(t.at);return n&&(i+=n),i},"visit_extent-keyword":function(t){var i=t.value,n=r.visit(t.at);return n&&(i+=" at "+n),i},"visit_position-keyword":function(r){return r.value},visit_position:function(t){return r.visit(t.value.x)+" "+r.visit(t.value.y)},"visit_%":function(r){return r.value+"%"},visit_em:function(r){return r.value+"em"},visit_px:function(r){return r.value+"px"},visit_literal:function(t){return r.visit_color(t.value,t)},visit_hex:function(t){return r.visit_color("#"+t.value,t)},visit_rgb:function(t){return r.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return r.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,i){var n=t,e=r.visit(i.length);return e&&(n+=" "+e),n},visit_angular:function(r){return r.value+"deg"},visit_directional:function(r){return"to "+r.value},visit_array:function(t){var i="",n=t.length;return t.forEach(function(t,e){i+=r.visit(t),e<n-1&&(i+=", ")}),i},visit:function(t){if(!t)return"";if(t instanceof Array)return r.visit_array(t,result);if(t.type){var i=r["visit_"+t.type];if(i)return i(t);throw Error("Missing visitor visit_"+t.type)}throw Error("Invalid node.")}};return function(t){return r.visit(t)}}();